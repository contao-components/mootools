!function(){[Element,Window,Document].invoke("implement",{hasEvent:function(n){var e=this.retrieve("events"),t=e&&e[n]?e[n].values:null;if(t)for(var o=t.length;o--;)if(o in t)return!0;return!1}});function e(n,t,o){return t=n[t],o=n[o],function(n,e){o&&!this.hasEvent(e)&&o.call(this,n,e),t&&t.call(this,n,e)}}function i(t,o,i){return function(n,e){o[i].call(this,n,e),t[i].call(this,n,e)}}var c=Element.Events;Element.defineCustomEvent=function(n,t){var o=c[t.base];return t.onAdd=e(t,"onAdd","onSetup"),t.onRemove=e(t,"onRemove","onTeardown"),c[n]=o?Object.append({},t,{base:o.base,condition:function(n,e){return(!o.condition||o.condition.call(this,n,e))&&(!t.condition||t.condition.call(this,n,e))},onAdd:i(t,o,"onAdd"),onRemove:i(t,o,"onRemove")}):t,this},Element.enableCustomEvents=function(){Object.each(c,function(n,e){n.onEnable&&n.onEnable.call(n,e)})},Element.disableCustomEvents=function(){Object.each(c,function(n,e){n.onDisable&&n.onDisable.call(n,e)})}}(),Browser.Features.Touch=function(){try{return document.createEvent("TouchEvent").initTouchEvent("touchstart"),!0}catch(n){}return!1}(),Browser.Features.iOSTouch=function(){var n="cantouch",e=document.html,t=!1;if(!e.addEventListener)return!1;var o=function(){e.removeEventListener(n,o,!0),t=!0};try{e.addEventListener(n,o,!0);var i=document.createEvent("TouchEvent");return i.initTouchEvent(n),e.dispatchEvent(i),t}catch(n){}return o(),!1}(),function(){function n(){a=!1}var r,a,u="swipe",s={},e={touchstart:function(n){if(!(1<n.touches.length)){var e=n.touches[0];a=!0,s={x:e.pageX,y:e.pageY}}},touchmove:function(n){if(!r&&a){var e=n.changedTouches[0],t={x:e.pageX,y:e.pageY};if(this.retrieve("swipe:cancelVertical")&&10<Math.abs(s.y-t.y))a=!1;else{var o=this.retrieve("swipe:distance",50),i=t.x-s.x,c=i<-o;(o<i||c)&&(n.preventDefault(),a=!1,n.direction=c?"left":"right",n.start=s,n.end=t,this.fireEvent(u,n))}}},touchend:n,touchcancel:n};Element.defineCustomEvent(u,{onSetup:function(){this.addEvents(e)},onTeardown:function(){this.removeEvents(e)},onEnable:function(){r=!1},onDisable:function(){r=!0,n()}})}();